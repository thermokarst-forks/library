{% extends 'base.html' %}

{% block 'content' %}
{% if current_user_is_author %}
<div class="level">
  <div class="level-left"></div>
  <div class="level-right">
    <a class="button is-warning level-item" href="{% url 'plugins:edit' pk=plugin.pk slug=plugin.slug %}">
      Edit plugin
    </a>
  </div>
</div>
{% endif %}

<div class="columns">
  <div class="column">
    <div class="card">
      <div class="card-content">
        <div class="columns">
          <h1 class="title column is-paddingless">
            {{ plugin.title }}
          </h1>
          <h2 class="column">
            {% for author in authors %}
            <a class="is-pulled-right" href="{{ author.get_absolute_url }}" target="_blank">
              @{{ author.username }}
            </a>
            {% endfor %}
          </h2>
        </div>

        {% if plugin.version.strip %}
        <div class="columns">
          <div class="tags">
            <span class="tag">
              {{ plugin.version }}
            </span>
          </div>
        </div>
        {% endif %}

        <hr>

        <div class="content">
          <p>
            <span class="has-text-weight-bold">source:</span>
            {% if plugin.source_url.strip %}
            <a href="{{ plugin.source_url }}" target="_blank">
              {{ plugin.source_url }}
            </a>
            {% else %}
            <span>No source URL on file</span>
            {% endif %}
          </p>
          <p>
            <span class="has-text-weight-bold">dependencies:</span>
            <ul>
              {% for dependency in plugin.dependencies.all %}
                <li>
                  <a href="{{ dependency.get_absolute_url }}">
                    {{ dependency.title }}
                  </a>
                </li>
              {% empty %}
                Plugin has no dependencies
              {% endfor %}
            </ul>
          </p>
          <hr>
          <h4>install guide:</h4>
          <div class="content">
            {# TODO: markdown #}
            {{ plugin.install_guide }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="column">
    <div class="content">
      {# TODO: markdown #}
      {{ plugin.description }}
    </div>
  </div>
</div>
{% endblock %}
